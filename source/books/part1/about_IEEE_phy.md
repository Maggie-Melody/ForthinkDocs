# 4. IEEE UWB PHY详解

## 4.1 前导码编码

在IEEE的标准中，对于PRF=15.6M的情况，有8组编码1-8，长度为31，分别如下：

```matlab
% 'IEEE_Table_16_6_CodeIndex1': -0000+0-0+++0+-000+-+++00-+0-00
% 'IEEE_Table_16_6_CodeIndex2': 0+0+-0+0+000-++0-+---00+00++000
% 'IEEE_Table_16_6_CodeIndex3': -+0++000-+-++00++0+00-0000-0+0-
% 'IEEE_Table_16_6_CodeIndex4': 0000+-00-00-++++0+-+000+0-0++0-
% 'IEEE_Table_16_6_CodeIndex5': -0+-00+++-+000-+0+++0-0+0000-00
% 'IEEE_Table_16_6_CodeIndex6': ++00+00---+-0++-000+0+0-+0+0000
% 'IEEE_Table_16_6_CodeIndex7': +0000+-0+0+00+000+0++---0-+00-+
% 'IEEE_Table_16_6_CodeIndex8': 0+00-0-0++0000--+00-+0++-++0+00
```

而对于PRF=62.4M而言，包括从9-24的编码，长度为127，如下：
```matlab
% 'IEEE_Table_16_7_CodeIndex9': +00+000-0--00--+0+0+00-+-++0+0000++-000+00-00--0-+0+0--0-+++0++000+-0+00-0++-0+++00-+00+0+0-0++-+--+000000+00000-+0000-0-000--+
% 'IEEE_Table_16_7_CodeIndex10': ++00+0-+00+00+000000-000-00--000-0+-+0-0+-0-+00000+-00++0-0+00--+00++-+0+-0+0000-0-0-0-++-+0+00+0+000-+0+++000----+++0000+++0--
% 'IEEE_Table_16_7_CodeIndex11': -+-0000+00--00000-0+0+0+-0+00+00+0-00-+++00+000-+0+0-0000+++++-+0+--0+-0++--0-000+0-+00+0+----000-000000-+00+-0++000++-00++-0-0
% 'IEEE_Table_16_7_CodeIndex12': -+0++000000-0+0-+0---+-++00-+0++0+0+0+000-00-00-+00+-++000-+-0-++0-0++++0-00-0++00+0+00++-00+000+-000-0--+0000-0000--0+00000+--
% 'IEEE_Table_16_7_CodeIndex13': +000--0000--++0-++++0-0++0+0-00-+0++00++-0++0+-+0-00+00-0--000-+-00+0000-0++-00000+-0-000000-00-+-++-+000-0+0+0+++-00--00+0+000
% 'IEEE_Table_16_7_CodeIndex14': +000++0-0+0-00+-0-+0-00+0+0000+0+-0000++00+0+++++-+0-0+-0--+0++--000---0+000+0+0-+-000000+-+-0--00++000-00+00++-00--++-00-00000
% 'IEEE_Table_16_7_CodeIndex15': 0+-00+0-000-++0000---++000+0+-0-+00-+000--0-00--0--+++-+0-++00+-++0+00000+0-0+++-00+00+000-0000+00--+0++0+0+0-00-0-+-0+0++00000
% 'IEEE_Table_16_7_CodeIndex16': ++0000+000+00+--0+-++0-000--00+-0+00++000+++00+0+0-0-+-0-0+00+00+0++----+00++--+0+-0--+000000-0-0000-+0--00+00000+-++000-0-+0+0
% 'IEEE_Table_16_7_CodeIndex17': +--000-0-0000+-00000+000000+--+-++0-0+0+00+-00+++0-++0-00+0-+000++0+++-0--0+0+-0--00-00+000-++0000+0++-+-00+0+0+--00--0-000+00+
% 'IEEE_Table_16_7_CodeIndex18': --0+++0000+++----000+++0+-000+0+00+0+-++-0-0-0-0000+0-+0+-++00+--00+0-0++00-+00000+-0-+0-0+-+0-000--00-000-000000+00+00+-0+00++
% 'IEEE_Table_16_7_CodeIndex19': -0-++00-++000++0-+00+-000000-000----+0+00+-0+000-0--++0-+0--+0+-+++++0000-0+0+-000+00+++-00-0+00+00+0-+0+0+0-00000--00+0000-+-0
% 'IEEE_Table_16_7_CodeIndex20': --+00000+0--0000-0000+--0-000-+000+00-++00+0+00++0-00-0++++0-0++-0-+-000++-+00+-00-00-000+0+0+0++0+-00++-+---0+-0+0-000000++0+-
% 'IEEE_Table_16_7_CodeIndex21': +0+00--00-+++0+0+0-000+-++-+-00-000000-0-+00000-++0-0000+00-+-000--0-00+00-0+-+0++0-++00++0+-00-0+0++0-0++++-0++--0000--000+000
% 'IEEE_Table_16_7_CodeIndex22': 0-00-++--00-++00+00-000++00--0-+-+000000-+-0+0+000+0---000--++0+--0-+0-0+-+++++0+00++0000-+0+0000+0+00-0+-0-+00-0+0-0++000+0000
% 'IEEE_Table_16_7_CodeIndex23': 000++0+0-+-0-00-0+0+0++0+--00+0000-000+00+00-+++0-0+00000+0++-+00++-0+-+++--0--00-0--000+-00+-0-+0+000++---0000++-000-0+00-+000
% 'IEEE_Table_16_7_CodeIndex24': +0+-0-000++-+00000+00--0+-0000-0-000000+--0-+0+--++00+----++0+00+00+0-0-+-0-0+0+00+++000++00+0-+00--000-0++-+0--+00+000+0000++0
```

而在IEEE 802.15.4z标准中，针对更高速率应用又增加了25-32的编码，长度为91，如下：
```matlab
% 'IEEE_15_4z_CodeIndex25': -0++++--+--+-++++-+---++--++++++-++-+00+--+0--+0+++++--+++--0--0+-+----0-+-+-+0+--++-+-+++0
% 'IEEE_15_4z_CodeIndex26': ++0+-+---+++++-+-++--+--++---+-0+++0-++++-+0+0--0+-++-++++++--+-++00+++--0+-----+-0+-+-+---
% 'IEEE_15_4z_CodeIndex27': +++--+++---+-+-0-+--0++-+-+0-++++++++++--+--++-++0++-+-+--+--+++---0-+++-0+00---++-+--0-++0
% 'IEEE_15_4z_CodeIndex28': +++++--+++-++---+-+--0++---+-+0+-----+0+++--+-+--+-++-++++0-0-++00+-+++-++-+0-+0--+---+++0+
% 'IEEE_15_4z_CodeIndex29': +-0--+-++--0++00++-++-----++++++-0+--+-++--+-+++--+++++++-+++0+-+-0-0-++---+0---++0-+-+-++-
% 'IEEE_15_4z_CodeIndex30': -++0--0++-00--++-++-+--+++++---+++-+-0+-+-+0+++++-+++-+++-+0------++-++-+0----+-+-0+0+-+++-
% 'IEEE_15_4z_CodeIndex31': -+-++0+++--++-0++00--++--+++-+------0+++-+++++--+-++---+-+---+-+0-+--0+0+-++-++0+-+--0+++++
% 'IEEE_15_4z_CodeIndex32': -+++++++++++---+-++--++00-+-+0-+-0-++--+++-+++0--0++-+-+-0---++-0----++++-+-0+0-+-++-++--+-
```

## 4.2 前导码重复数

Preamble symbol repetitions (PSR)。

对于兼容IEEE 802.15.4-2015、IEEE 802.15.4z BPRF兼容BPM BPSK调制的方式下，标准前导码长度为16，64，1024或4096。

而在IEEE 802.15.4z的定义中，还支持16, 24, 32, 48, 64, 96, 128, 256.


## 4.3 SFD

在IEEE 802.15.4-2015中，有两种SFD，短SFD包括8个symbol，而长SFD则包括64个Symbol，定义如下：
```matlab
% 'IEEE_802_15_4_2015_short': 0+0-+00-
% 'IEEE_802_15_4_2015_long': 0+0-+00-0+0-+00--00+0-0+0+000-0-0-00+0--0-+0000++00---+-++0000++
```
在IEEE 802.15.4-2015中，均为3元编码（tenary）；此外，长SFD仅用于低数据率的应用（110kbps）；而短SFD则用于850kbp或更高的数据率应用。
而在IEEE 802.15.4z中则引入了更多形式的SFD，同时也包括二元编码。

```matlab
% 'IEEE_802_15_4_2015_short': 0+0-+00- (IEEE 802.15.4z phyHrpUwbSfdSelector 0)
% 'IEEE_802_15_4z_SFD1': --+- (IEEE 802.15.4z phyHrpUwbSfdSelector 1)
% 'IEEE_802_15_4z_SFD2': ---+--+- (IEEE 802.15.4z phyHrpUwbSfdSelector 2)
% 'IEEE_802_15_4z_SFD3': -----++--+-+--+- (IEEE 802.15.4z phyHrpUwbSfdSelector 3)
% 'IEEE_802_15_4z_SFD4': -------+--+--+-+-+---++---+-++-- (IEEE 802.15.4z phyHrpUwbSfdSelector 4)
```
因此，在应用中，针对不同标准的芯片，尤其是IEEE 802.15.4z的芯片需要向下兼容，则只能使用相同的`IEEE_802_15_4_2015_short`。

